# グローバル設定
error_page 404 /404.html;
client_max_body_size 10M;

# サーバー1
server {
    listen 8080;  # ポート8080で待ち受け
    host 127.0.0.1;  # ホストIP
    server_name mysite.com www.mysite.com;  # サーバー名

    default_server on;  # デフォルトサーバー指定
    error_page 500 502 503 504 /50x.html;  # エラーページ設定

    location / {
        root /var/www/mysite;  # ルートディレクトリ
        methods GET POST;  # 許可されるメソッド
        autoindex off;  # ディレクトリリスト非表示
        index index.html;  # ディレクトリのデフォルトファイル
        cgi_extension .php;  # CGI対象ファイルの拡張子
        cgi_handler /usr/bin/php-cgi;  # CGIプログラム
    }

    location /upload {
        root /var/www/uploads;  # アップロードディレクトリ
        methods POST;  # POSTメソッドを許可
        upload_directory /var/www/uploads;  # アップロード保存場所
        client_max_body_size 5M;  # アップロードサイズ制限
    }
}

# サーバー2（別のホスト・ポート用）
server {
    listen 9090;  # ポート9090で待ち受け
    host 192.168.1.1;  # ホストIP

    location / {
        root /var/www/another_site;  # ルートディレクトリ
        methods GET;  # GETメソッドのみ許可
        autoindex on;  # ディレクトリリスト表示
        index index.html;  # デフォルトファイル
    }

    location /cgi-bin {
        cgi_extension .py;  # CGI対象の拡張子
        cgi_handler /usr/bin/python;  # CGIプログラム
    }
}
